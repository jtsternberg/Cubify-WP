/*! Cubify WP - v0.1.0 - 2014-04-27
 * http://webdevstudios.com
 * Copyright (c) 2014; * Licensed GPLv2+ */
window.Cubify_WP=function(e,t,n){"use strict";var i={$:{}},a=i.$;return i.cacheSelectors=function(){a.cubes=n(".cubify-wp"),a.imgs=n(".entry-content img")},i.init=function(){i.cacheSelectors(),i.cubify()},i.cubify=function(){var e,t;a.cubes.each(function(){e=n(this);var a=parseInt(e.data("percentage"),10);t=Math.round(e.parent().width()*a/100),e.width(t),e.height(t),new i._3d(e,t)}),a.imgs.each(function(){var a=n(this);e=a.after("<div></div>").siblings("div"),e.data("img",a.attr("src")),e.addClass(a.attr("class")),t=a.width(),new i._3d(e,t),a.hide()})},n(t).ready(i.init),i._3d=function(e,t){var n={};return n.loadDataAttributes=function(){var t=e.data();n.cubeMaterial=new THREE.MeshLambertMaterial({color:13421772}),t.img&&(n.cubeMaterial.map=THREE.ImageUtils.loadTexture(t.img)),t.color&&(n.cubeMaterial.color=new THREE.Color(t.color))},n.setupScene=function(){n.renderer=new THREE.WebGLRenderer({alpha:!0}),n.renderer.setSize(t,t),n.renderer.setClearColor(0,0),e.append(n.renderer.domElement),n.camera=new THREE.PerspectiveCamera(45,t/t,1,1e3),n.camera.position.set(0,0,5),n.scene=new THREE.Scene},n.update=function(){n.cube.rotation.y+=.01,n.cube.rotation.x+=.01,requestAnimationFrame(n.update),n.renderer.render(n.scene,n.camera)},n.addCube=function(){n.cube=new THREE.Mesh(new THREE.BoxGeometry(2,2,2),n.cubeMaterial),n.scene.add(n.cube)},n.addLights=function(){n.ambientLight=new THREE.AmbientLight(3355443),n.scene.add(n.ambientLight),n.directionalLight=new THREE.DirectionalLight(16777215,1),n.directionalLight.position.set(1,1,2).normalize(),n.scene.add(n.directionalLight)},n.init=function(){!0!==n.initDone&&(n.setupScene(),n.loadDataAttributes(),n.addCube(),n.addLights(),n.update(),n.initDone=!0)}(),n},i}(window,document,jQuery);